/* ================================================================
   LandingWarp.css — Cinematic "hyperspace year entry" landing

   All animated properties (scale, blur, opacity, brightness) are
   set directly as inline styles by the rAF loop in LandingWarp.tsx.
   This CSS provides the base layout, glassmorphism, and idle-state
   animations (breathing, blink, pop).
   ================================================================ */

/* ---- Fullscreen overlay ---- */
.lw-overlay {
  position: fixed;
  inset: 0;
  z-index: 100;
  /* opacity is driven by rAF during fade phase */
  /* Slight blue-tinted space background — lighter at center for depth */
  background: radial-gradient(
    ellipse at 50% 50%,
    #080c1e 0%,
    #03060f 45%,
    #000008 100%
  );
  overflow: hidden;
  cursor: default;
  user-select: none;
  -webkit-user-select: none;
  /* Remove focus outline (we auto-focus for keyboard capture) */
  outline: none;
}

/* ---- Star canvas wrapper ---- */
/* transform + filter are set by rAF inline styles during warp */
.lw-stars {
  position: absolute;
  inset: 0;
  will-change: transform, filter;
  /* CRITICAL: prevent canvas from stealing mouse/keyboard focus */
  pointer-events: none;
}

/* Ensure tsParticles wrapper + canvas fill the container */
.lw-stars > div,
.lw-stars canvas {
  width: 100% !important;
  height: 100% !important;
  display: block;
  pointer-events: none;
}

/* ---- Edge vignette (dark corners, opacity set by rAF) ---- */
.lw-vignette {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse at 50% 50%,
    transparent 10%,
    rgba(0, 0, 0, 0.85) 100%
  );
  opacity: 0;
  pointer-events: none;
  will-change: opacity;
}

/* ---- Center glow (opacity set by rAF) ---- */
.lw-center-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 420px;
  height: 420px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  background: radial-gradient(
    circle,
    rgba(150, 185, 255, 0.35) 0%,
    rgba(100, 150, 255, 0.12) 35%,
    transparent 70%
  );
  opacity: 0;
  pointer-events: none;
  will-change: opacity;
}

/* ---- White flash (opacity set by rAF) ---- */
.lw-flash {
  position: absolute;
  inset: 0;
  background: white;
  opacity: 0;
  pointer-events: none;
  will-change: opacity;
}

/* ---- Portal area (positioning wrapper) ---- */
/* transform + opacity set by rAF during warp phases */
.lw-portal-area {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(1);
  z-index: 10;
  will-change: transform, opacity;
}

/* Subtle breathing pulse during idle — makes the portal feel alive */
.lw-breathing {
  animation: lw-breathe 4s ease-in-out infinite;
}

@keyframes lw-breathe {
  0%, 100% { transform: translate(-50%, -50%) scale(1); }
  50%      { transform: translate(-50%, -50%) scale(1.018); }
}

/* ---- Portal glow (behind the glass, opacity set by rAF) ---- */
.lw-portal-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 380px;
  height: 160px;
  transform: translate(-50%, -50%);
  border-radius: 80px;
  background: radial-gradient(
    ellipse at center,
    rgba(130, 170, 255, 0.25) 0%,
    rgba(100, 150, 255, 0.08) 50%,
    transparent 75%
  );
  opacity: 0;
  pointer-events: none;
  will-change: opacity;
}

/* ---- Glassmorphic portal pill ---- */
.lw-portal {
  position: relative;
  width: 320px;
  height: 100px;
  border-radius: 50px;
  /* Resting-state glow — very faint blue halo */
  box-shadow:
    0 0 30px rgba(100, 140, 255, 0.08),
    0 0 60px rgba(80, 120, 255, 0.04);
}

/* Layer 1: backdrop blur (the "glass" effect) */
.lw-portal__filter {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  backdrop-filter: blur(24px) saturate(1.3);
  -webkit-backdrop-filter: blur(24px) saturate(1.3);
}

/* Layer 2: translucent overlay + fine border */
.lw-portal__overlay {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Layer 3: specular inset highlights */
.lw-portal__specular {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow:
    inset 0  1px 1px rgba(255, 255, 255, 0.12),
    inset 0 -1px 1px rgba(0,   0,   0,   0.15);
}

/* Content layer (text sits above glass layers) */
.lw-portal__content {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

/* ---- Year text ---- */
.lw-year {
  font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: 46px;
  font-weight: 800;
  color: #ffffff;
  letter-spacing: 6px;
  text-shadow: 0 0 24px rgba(255, 255, 255, 0.25);
  display: flex;
  align-items: center;
}

/* Subtle pop animation when digits change (re-triggered via React key) */
.lw-year-pop {
  animation: lw-pop 120ms ease-out;
}

@keyframes lw-pop {
  from { transform: scale(1.05); }
  to   { transform: scale(1); }
}

/* Blinking caret — subtle, not annoying */
.lw-caret {
  display: inline-block;
  width: 2px;
  height: 40px;
  background: rgba(255, 255, 255, 0.55);
  margin-left: 4px;
  animation: lw-blink 1s step-end infinite;
}

@keyframes lw-blink {
  0%, 100% { opacity: 1; }
  50%      { opacity: 0; }
}

/* ---- Placeholder ---- */
.lw-placeholder {
  font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: 20px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.25);
  letter-spacing: 2px;
}

/* ---- Helper text below portal ---- */
.lw-helper {
  position: absolute;
  top: calc(50% + 72px);
  left: 50%;
  transform: translateX(-50%);
  font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: 13px;
  font-weight: 400;
  color: rgba(255, 255, 255, 0.18);
  letter-spacing: 1.5px;
  pointer-events: none;
  white-space: nowrap;
}

/* ---- Micro-shake (Enter with empty input) ---- */
.lw-portal-area.lw-shake {
  animation: lw-shake 160ms ease-in-out;
}

@keyframes lw-shake {
  0%, 100% { transform: translate(-50%, -50%) translateX(0); }
  20%      { transform: translate(-50%, -50%) translateX(-5px); }
  40%      { transform: translate(-50%, -50%) translateX(5px); }
  60%      { transform: translate(-50%, -50%) translateX(-3px); }
  80%      { transform: translate(-50%, -50%) translateX(3px); }
}

/* ---- Reduced motion: skip all animation ---- */
@media (prefers-reduced-motion: reduce) {
  .lw-breathing,
  .lw-year-pop,
  .lw-caret {
    animation: none;
  }
}
